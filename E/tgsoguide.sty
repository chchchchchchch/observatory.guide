
  \usepackage[utf8]{inputenc}
  
  \usepackage[defaultlines=5,all]{nowidow}
  \newcommand{\setwidowstandard}{\setnowidow[5]\setnoclub[5]}
  \setwidowstandard

  \usepackage{geometry}
  \usepackage{graphicx}
  \usepackage{pdfpages}
  \usepackage{seqsplit}
  \usepackage[hang,multiple]{footmisc}
  \usepackage{everypage}
  \usepackage{setspace}
  \usepackage{relsize}
  \usepackage{scalefnt}
  \usepackage{sectsty}
  \usepackage{titlesec}
  \usepackage[activate={true,nocompatibility},
              final,tracking=true,kerning=true,
              spacing=true,factor=1100,
              stretch=10,shrink=10]{microtype}

  % https://groups.google.com/forum/#!topic/pandoc-discuss/_tssxEsT0eg
  \usepackage{enumerate}
  \usepackage[shortlabels]{enumitem}
  \usepackage{afterpage}
  \usepackage{etoolbox}
  \usepackage{marginnote}
  \usepackage{tocloft}
  \usepackage{csquotes}
  \usepackage{fancyhdr}
  \usepackage{fancyvrb}
  \usepackage{alltt}      % USED BY QUAVERBATIM
 %\usepackage{hyperref}
  \usepackage{refcount}   % USED BY \imgshift
  \usepackage{float}
  \usepackage{wrapfig}
  \usepackage{pifont}
  \usepackage{framed}
  \usepackage{needspace} % USEDY BY listing

  \newcounter{floats}  % COUNT FLOATS TO ADD LABELS
  \newcounter{pagenow} % MOSTLY EMPTY/USED TO STORE

% --------------------------------------------------------------------------- %
%  F O R M A T
% --------------------------------------------------------------------------- %

  % A6
  \setlength\textheight{.83\paperheight}
  \setlength\textwidth{.72\paperwidth}
  \setlength\topmargin{-.16\paperheight}
  \setlength\oddsidemargin{-.05\paperwidth}
  \setlength\evensidemargin{-.13\paperwidth}

% --------------------------------------------------------------------------- %
%  B A S I C
% --------------------------------------------------------------------------- %
  \setlength\marginparwidth{1.0cm}
 %\setlength\marginparsep{5pt} % 6pt
  \setlength\marginparsep{2pt} % 6pt
 % http://www.weinelt.de/latex/marginparpush.html
  \setlength{\marginparpush}{2\baselineskip}
  \reversemarginpar


  \parindent=0pt
 %\setlength{\parskip}{5pt plus 5pt minus 5pt}
  \setlength{\parskip}{8pt plus 5pt minus 5pt}
  \setstretch{1.1} % LINEHEIGHT % (P:setspace)

  \renewcommand*{\chapterheadstartvskip}{\vspace{0pt}}
  \renewcommand*{\chapterheadendvskip}{\vspace{0pt}}
  \titlespacing\section{0pt}{20pt plus 30pt minus 15pt}{2pt plus 3pt minus 0pt}

  \newcommand\urlf[1]{{\tt #1}}
  \newcommand\urlsplit[1]{\seqsplit{\tt #1}}

  % https://groups.google.com/forum/#!topic/pandoc-discuss/O-N0H1eBnVU
  % \let\oldhref=\href
  % \renewcommand{\href}[2]{#2\footnote{#1}}
  % \newcommand{\href}[2]{#2\footnote{#1}}
  \newcommand{\href}[2]{
   \iffootnote #2 ({\tt\tiny\seqsplit{#1}})
   \else #2\footnote{#1} \fi
   }

  % http://tex.stackexchange.com/questions/167823/
  % -> multiply-define-a-label-on-purpose
  \makeatletter
  \def\@newl@bel#1#2#3{{%
    \@ifundefined{#1@#2}%
      {\def\tmp{#3}}%
      {%
  \edef\tmp{%
    {\expandafter\expandafter\expandafter\@firstoftwo\csname#1@#2\endcsname,
     \@firstoftwo#3}%
    {\expandafter\expandafter\expandafter\@secondoftwo\csname#1@#2\endcsname,
     \@secondoftwo#3}%
  }}%
      \expandafter\xdef\csname#1@#2\endcsname{\tmp}%
  }}
  \def\@testdef #1#2#3{}
  \makeatother

% DON'T START CHAPTER ON NEW PAGE AUTOMATICALLY
%  \makeatletter
%  \patchcmd{\chapter}{\if@openright\cleardoublepage\else\clearpage\fi}{}{}{}
%  \makeatother

% PREVENT HYPHENATION FOR WORDS STARTING WITH UPPERCASE
% \uchyph=0
% PREVENT HYPHENATION OVER PAGE BREAK
  \brokenpenalty10000\relax
% PREVENT PAGE BREAK WITHIN LISTS
%  \let\ITEMIZE\itemize
%  \let\ENDITEMIZE\enditemize
%  \renewenvironment{itemize}{\begin{samepage}\ITEMIZE}
%                            {\ENDITEMIZE\end{samepage}}

% --------------------------------------------------------------------------- %
% P A G E   H E A D E R /  F O O T E R
% --------------------------------------------------------------------------- %

  % http://texblog.org/2007/11/07/headerfooter-in-latex-with-fancyhdr
  \pagestyle{fancy}
  \fancyhead{} % CLEAR DEFAULT
  \fancyfoot{} % CLEAR DEFAULT
  \fancyfoot[LO]{\vspace{-8mm} \hspace{-11mm} {\scriptsize\thepage}}
  \fancyfoot[RE]{\vspace{-8mm} {\scriptsize\thepage} \hspace{-11mm}}

  % http://tex.stackexchange.com/questions/114956/
  % -> how-to-insert-footer-in-first-pages-of-chapter 
  \fancypagestyle{plain}{%
  \fancyfoot[LO]{\vspace{-8mm} \hspace{-11mm} {\scriptsize\thepage}}
  \fancyfoot[RE]{\vspace{-8mm} {\scriptsize\thepage} \hspace{-11mm}}
  }

  \renewcommand{\headrulewidth}{0pt}

% --------------------------------------------------------------------------- %
%  F O N T S
% --------------------------------------------------------------------------- %

  \newcommand{\ttstandard}{ipm} % https://fontain.org/fira-code
 %\newcommand{\rmstandard}{phv}
 %\newcommand{\sfstandard}{phv}
 %\newcommand{\rmstandard}{grm} % https://fontain.org/roboto-mono 
 %\newcommand{\rmstandard}{aut} % https://fontain.org/titillium
 %\newcommand{\sfstandard}{aut}
 %\newcommand{\rmstandard}{dai} % https://fontain.org/aileron
 %\newcommand{\sfstandard}{dai}
  \newcommand{\rmstandard}{mar} % https://fontain.org/arimo
  \newcommand{\sfstandard}{mar}

 %\raggedright % FLATTERSATZ

  \raggedbottom
  % Ohne die folgenden drei Zeilen funktioniert es nur fast:
  \newcommand*\origfootnoterule{}
  \let\origfootnoterule\footnoterule
  \renewcommand*{\footnoterule}{\vskip 0pt plus .01fil\origfootnoterule}


   \newcommand{\embody}{}
 % CHANGE \emph FOR BODYTEXT
   \DeclareTextFontCommand{\emph}{%
     \ifbodytext%
     \embody
     \else\em %
     \fi%
    }
  %\renewcommand{\embody}{\fontfamily{pju}\fontshape{it}%
  %                       \selectfont\relscale{1.2}}
   \renewcommand{\embody}{\it}

   \renewcommand*{\ttdefault}{\ttstandard}\selectfont
   \renewcommand*{\rmdefault}{\rmstandard}\selectfont
   \renewcommand*{\sfdefault}{\sfstandard}\selectfont

%  \let\OldTexttt\texttt
%  \renewcommand{\texttt}[1]{%
%  \OldTexttt{\fontfamily{\ttstandard}%
%              \selectfont{%
%               \relscale{.95}{##1}}}}

  \renewcommand\urlsplit[1]{\seqsplit{\tt\tiny ##1}}
  \renewcommand\urlf[1]{{\scalefont{.8}\tt ##1}}
  \newcommand{\http}[1]{\textcolor{red}{#1}XX} % STILL TESTING


% --------------------------------------------------------------------------- % 
%  H E A D L I N E S
% --------------------------------------------------------------------------- % 
  \chapterfont{\large\setstretch{1.0}}
  \sectionfont{\relscale{0.9}\setstretch{0.9}}
  \subsectionfont{\relscale{0.9}}

 %\let\Chapter\chapter
 %\renewcommand\chapter[1]{\Chapter*{#1}}
 %\let\Section\section
 %\renewcommand\section[1]{\newpage\Section*{#1}}
 %\let\Subsection\subsection
 %\renewcommand\subsection[1]{\newpage\Subsection*{#1}}
 %\let\Subsubsection\subsubsection
 %\renewcommand\subsubsection[1]{\newpage\Subsubsection*{#1}}

  \let\Chapter\chapter
  \renewcommand\chapter[1]{\needspace{4}\textbf{#1}}
  \let\Section\section
  \renewcommand\section[1]{\needspace{4}\textbf{#1}}
  \let\Subsection\subsection
  \renewcommand\subsection[1]{\needspace{4}\textbf{#1}}
  \let\Subsubsection\subsubsection
  \renewcommand\subsubsection[1]{\needspace{4}\textbf{#1}}


% --------------------------------------------------------------------------- % 
%  F O O T N O T E S  
% --------------------------------------------------------------------------- % 
 
  \renewcommand{\footnotelayout}{\raggedright} 
 
% SMALLER DISTANCE FOOTNOTENUMBER AND TEXT 
  \let\oldfootnote\footnote 
% \, = small non-breaking space 
  \renewcommand\footnote[1]{\,\oldfootnote{#1}} 
  \setlength{\footnotemargin}{1em} 
  \setlength{\footskip}{15mm} 
 % ABSTAND TRENNLINIE FUSSNOTEN 
   \renewcommand{\footnoterule}{ 
    \vspace*{5mm} 
     \noindent 
      \rule{\textwidth}{0.5pt}{ 
       \vspace*{-3pt} 
  }} 
% SAVE FOR RESET 
  \newlength{\SKIPFOOTINS} 
  \setlength{\SKIPFOOTINS}{\skip\footins}

% --------------------------------------------------------------------------- %
% Q U O T E
% --------------------------------------------------------------------------- %
  \makeatletter
  \renewenvironment{quote}
                {\list{}{\listparindent=0pt%whatever you need
                         \itemindent    \listparindent
                         \leftmargin=5pt%  whatever you need
                         \rightmargin=10pt%whatever you need
                         \topsep=2pt%%%%%  whatever you need
                        %\parsep        \z@ \@plus\p@
                         \sl \raggedright
                        }%
                 \item\relax}
                {\endlist}
  \makeatother

  % \newcommand{\AtEndQuote}{}%
  % \AtEndEnvironment{quote}{\AtEndQuote}
  % \newcommand{\AtBeginQuote}{}%
  % \AtBeginEnvironment{quote}{\AtBeginQuote}

% --------------------------------------------------------------------------- %
% L I S T S
% --------------------------------------------------------------------------- %

  \setitemize[0]{leftmargin=4pt,rightmargin=4pt} % (P:enumitem)
  \setlist[enumerate]{leftmargin=1.2em}
  \setlist{noitemsep} % (P:enumitem)

% --------------------------------------------------------------------------- %
% C O D E   E N V I R O N M E N T S
% --------------------------------------------------------------------------- %

  \renewcommand{\kwa}{\bfseries}
  \renewcommand{\kwb}{\kwa}
  \renewcommand{\kwc}{}

  \newcommand{\symrect}{\grafikinline{\iconcharrect}{}}
  \newcommand{\symrhombus}{\grafikinline{\iconcharrhombus}{}}
  \newcommand{\symtrapez}{\grafikinline{\iconchartrapez}{}}
  \newcommand{\symarrowright}{\grafikinline{\iconchararrowright}{}}

  \DeclareUnicodeCharacter{2192}{\grafikinline{\iconchararrowright}{\hspace{2em}}}

  \newcommand{\lstsetCode}[1]{%
  \lstset{ %
    basicstyle=\fontencoding{T1}\linespread{#1}
               \fontfamily{ipm}\selectfont\footnotesize, 
    commentstyle=\scalefont{1}, 
    keywordstyle = \kwa, 
    keywordstyle = [2]{\kwb}, 
    keywordstyle = [3]{\kwc}, 
    stringstyle=\scalefont{1}, 
    showspaces=false, 
    showtabs=false, 
    columns=fixed, 
    numbers=none, 
    frame=none, 
    numberstyle=\tiny, 
    breaklines=flase, 
    showstringspaces=false, 
    aboveskip=1em, 
    xleftmargin=0cm, 
    upquote=true, 
  % https://tex.stackexchange.com/a/24532
    inputencoding=utf8,
    extendedchars=true,
    literate={▭}{{\symrect}}1 
             {♢ }{{\symrhombus}}1 
             {⏢}{{\symtrapez}}1 
             {→}{{\symarrowright}}1,
    escapechar=° 
   }\renewcommand{\emptylinelst}{\vspace{-1\baselineskip}
                                \vfill\pagebreak[0]}
  }

  \newcommand{\lstsetQuaverbatim}{%
  \lstset{ %
    basicstyle=\fontencoding{T1}\linespread{1.5}
               \fontfamily{iad}\selectfont\footnotesize, 
    breaklines=true,
    breakautoindent=false,
    breakindent=1em,
    aboveskip=1em,xleftmargin=0cm,
    showspaces=false,showtabs=false,columns=fixed,
    numbers=none,frame=none,showstringspaces=false,
    upquote=true,escapechar=°}
   \renewcommand{\emptylinelst}{\vspace{1\baselineskip}}
   }


  \newcommand{\lstReset}{\lstset{language={}}
                         \renewcommand{\emptylinelst}{\vspace{.5\baselineskip}}}
  \newcommand{\lstsetBash}{\lstset{language=Bash+,
               morekeywords = [2]{write2src,getFile,
                                  mkqr,getVerbatim
             }}}
  \newcommand{\lstsetPython}{\lstset{language=Python,
                                     basicstyle=\fontencoding{T1}\linespread{1.5}
                                                 \fontfamily{ipm}\selectfont\footnotesize}
                              \renewcommand{\emptylinelst}{%
                               \vspace{-.4\baselineskip}}
  }

  % https://tex.stackexchange.com/a/215331
  % -> widow-orphan-lstlisting
%  \lstnewenvironment{plain}{\vfill%
%                            \needspace{4\baselineskip}%
%                            \lstsetCode{1}
%                            \lstReset}
%                           {\vfill\vfill\vfill}
%  \lstnewenvironment{bashcode}{\vfill%
%                               \needspace{4\baselineskip}%
%                               \lstsetCode{1.5}
%                               \lstsetBash}
%                              {\vfill\vfill\vfill}
%  \lstnewenvironment{pythoncode}{\vfill%
%                                 \needspace{4\baselineskip}%
%                                 \lstsetCode{1}
%                                 \lstsetPython}
%                                {\vfill\vfill\vfill}
%  \lstnewenvironment{quaverbatim}{\lstsetQuaverbatim}{}

  \lstnewenvironment{plain}[1]{\lstsetCode{1}\lstReset
                               \ifnum\numexpr#1 < 5
                               \color{green}
                               \else
                               \color{red}
                               \fi}
                              {}
  \lstnewenvironment{bashcode}[1]{\lstsetCode{1.5}\lstsetBash
                                  \ifnum\numexpr#1 < 5
                                  \color{green}
                                  \else
                                  \color{red}
                                  \fi}
                                 {}
  \lstnewenvironment{pythoncode}[1]{\lstsetCode{1}\lstsetPython
                                    \ifnum\numexpr#1 < 5
                                    \color{green}
                                    \else
                                    \color{red}
                                    \fi}
                                   {}
  \lstnewenvironment{quaverbatim}[1]{\lstsetQuaverbatim
                                     \ifnum\numexpr#1 < 5
                                     \color{green}
                                     \else
                                     \color{red}
                                     \fi}
                                    {}
% --------------------------------------------------------------------------- %
%  TABLE OF CONTENTS
% --------------------------------------------------------------------------- %
  \newcommand{\tocitem}[3]{ %
  \ifnum\numexpr#1 < 2 
  \textbf{#2} \textbf{\pageref{#3}} %
  \else
  {\small #2 \textbf{\pageref{#3}}} %
  \fi
  }

  \newenvironment{tocpage}
  {\pagebreak[4] %
   \cleartoleft\cleartoright %
   \thispagestyle{empty}}
  {\pagebreak[4]}

% --------------------------------------------------------------------------- %
%  P A G E   C O M M A N D S
% --------------------------------------------------------------------------- %
  \newcommand{\emptypage}{
  % https://tex.stackexchange.com/questions/36880/
  % -> insert-a-blank-page-after-current-page
    \null
    \thispagestyle{empty}%
    \newpage
   }
% --------------------------------------------------------------------------- %
  \newcommand\cleartoleft{%
  \clearpage
  \ifthispageodd{\emptypage}{}
 }
% --------------------------------------------------------------------------- %
  \newcommand\cleartoright{%
  \clearpage
  % http://tex.stackexchange.com/questions/6143/
  % -> if-then-else-for-odd-page-even-page
  \ifthispageodd{}{\emptypage}
 }
% --------------------------------------------------------------------------- %

% --------------------------------------------------------------------------- %
% GRAPHICS
% --------------------------------------------------------------------------- %
   \newcommand\pdfpage[3]{%
   \includepdf[pagecommand={\thispagestyle{fancy}},%
               scale=1,pages=#2#3]{#1}
  }
% --------------------------------------------------------------------------- %
   \newcommand\pdfpageplus[4]{%
   \includepdf[pagecommand={\thispagestyle{fancy}#4},%
               scale=1,pages=#2#3]{#1}
  }
% --------------------------------------------------------------------------- %

 % VERTICAL SPACE HACK
 % http://tex.stackexchange.com/questions/61627/
 % -> prevent-action-if-top-of-page
% \newcommand\vspacenotonpagetop[1]{%
%    \par % make sure we end a paragraph
%    \vskip#1 % space above the rule
%    \leaders\vrule width \textwidth\vskip0pt % rule thickness is 0pt
%    \nointerlineskip % disable interline glue here
%    \vskip#1 % space below the rule
% }
% --------------------------------------------------------------------------- % 
  \newcommand{\marginicon}[1]{%
     \marginpar{
       ~ \\ % NOTHING NEEDED
       \vspace{-1mm}\\
        \includegraphics[width=\marginparwidth]{#1}
   }%\vspace{-3mm}
  }
% --------------------------------------------------------------------------- % 
  % \reversemarginpar % GLOBAL -> NOW (=BETTER?) DEFINED AT START
    \newcommand{\anchormarginicon}[1]{%
      \marginpar{
        ~ \\ % NOTHING NEEDED
        \vspace{-1\baselineskip}\\
         \mbox{\hspace{-.5\marginparwidth} %
          \includegraphics[width=1.5\marginparwidth]{#1} %
     }
    }
  }
% --------------------------------------------------------------------------- % 
 % \newcommand{\anchorinlineicon}[1]{%
 %  % http://www.weinelt.de/latex/raisebox.html
 %  \raisebox{-.4\baselineskip}[\baselineskip][\baselineskip]{ %
 %  \includegraphics[height=1.5\baselineskip]{#1}}\hspace{-.8em} %
 % }
  \newcommand{\grafikinline}[2]{%
     % http://www.weinelt.de/latex/raisebox.html
     \raisebox{-14\baselineskip}[\baselineskip]   % 
                                [.4\baselineskip] % ??
     {\hspace{-1.3\marginparwidth} %
     \includegraphics[height=17\baselineskip]{#1}\hspace{-7.3em}#2} %
  }
% --------------------------------------------------------------------------- % 
 % \newcommand\anchorinfo[2]{%
 % \begin{figure}[htb] % 
 %    {\footnotesize
 %     \color{black}
 %    {\hspace{-1em}\anchorinlineicon{\iconseeinline} % DEFINED FROM FUNCTIONS
 %     \vspace{-.5\baselineskip} %
 %     \setstretch{1.2} P.\pageref{#2}
 %     \rotatebox{180}{%
 %     \raisebox{-.6\baselineskip}[.8\baselineskip][.8\baselineskip]{ %
 %     {\large\ding{228}}}} #1 \par}}
 % %  \smallskip\vfill
 % \end{figure}
 % }
  \newcommand\pointright{% 
      \raisebox{-.1\baselineskip}[.8\baselineskip][.8\baselineskip]{ %
      {\large\ding{228}}} %
  }
  \newcommand\pointleft{% 
      \raisebox{-.6\baselineskip}[.8\baselineskip][.8\baselineskip]{ %
      {\large\ding{228}}} %
  }

  \newcommand\anchorinfo[2]{%
  \begin{figure}[htb] % 
     {\grafikinline{\iconseeinline} % DEFINED FROM MDSH FUNCTIONS
                   {\hspace{-3em}} %
     {\footnotesize %
      \vspace{-.5\baselineskip} %
      \setstretch{1.2} P.\pageref{#2}
      \rotatebox{180}{%
      \pointleft} #1 \par}}
  \end{figure}
  }

% --------------------------------------------------------------------------- % 
  \newcommand\anchor[3]{%
    \if\relax\detokenize{#3}\relax
    % #3 EMPTY -> DO NOTHING IN PLACE
    \else
    % #3 NON-EMPTY -> CREATE ANCHOR IN PLACE
      \if\relax\detokenize{#1}\relax
      % #1 EMPTY -> INSERT ANCHOR ONLY
       \anchormarginicon{\iconseemargin} % DEFINED FROM FUNCTIONS
       \marginpar{\centering\tiny P.\pageref{#2}} % NON-EMPTY
      \else
      % #1 NON-EMPTY -> INSERT INFO + ANCHOR
       \anchorinfo{#1}{#2}
      \fi
    \fi
  }
% --------------------------------------------------------------------------- %
  \newcommand\pageinfo[4]{%
   \if\relax\detokenize{#4}\relax
    % #4 EMPTY -> DO NOTHING
    \else % #4 NON-EMPTY
    \if\relax\detokenize{#3}\relax
     \makebox[\textwidth][l]{%
      \hspace{#1}%
       \parbox{\textwidth}{%
        \vspace{#2}
         \colorbox{white}{%
         {\footnotesize\parbox{.97\textwidth}{
           \smallskip
            \color{black} #4 %
             \smallskip}
     }}}}
     \fi
    \fi
  }

% --------------------------------------------------------------------------- % 
  % \usepackage{wrapfig}
  %
  % r R right side of the text
  % l L left side of the text
  % i I inside edge–near the binding (in a twoside document)
  % o O outside edge–far from the binding
  % The uppercase version allows the figure to float.
  % The lowercase version means exactly here.

  % https://tex.stackexchange.com/questions/111393/
  % -> too-much-space-around-wrap-figure
  \setlength{\intextsep}{.1\baselineskip}

% \newcommand{\imgsmall}[3]{
%  \begin{wrapfigure}{I}{.25\textwidth}%
%    \includegraphics[width=.25\textwidth]{#1}
%      \if\relax\detokenize{#2}\relax
%        \else \footnotemark 
%        \vspace{-1\baselineskip}
%      \fi
%  \end{wrapfigure}
%  \vfill
%     \if\relax\detokenize{#2}\relax
%     \else \footnotetext{#2} \fi
% }

  \newcommand{\imgsmall}[3]{
   \smallskip
   \begin{wrapfigure}{I}{.25\textwidth}%
        \stepcounter{floats}  % INCREASE COUNTER ..
        \label{FF:\thefloats} % .. TO CREATE A UNIQ LABEL
        \setcounterpageref{pagenow}{FF:\thefloats}
     \includegraphics[width=.25\textwidth]{#1}
       \if\relax\detokenize{#2}\relax
         \else \footnotemark 
         \vspace{-1\baselineskip}
       \fi
   \end{wrapfigure}
   \vfill
     \if\relax\detokenize{#2}\relax
     \else 
   % https://groups.google.com/d/msg/comp.text.tex/bkikh7bww_s/7ZPXiKMh7REJ
           \ifnum\value{pagenow}>\thepage
           \afterpage{\footnotetext{#2}}
           \else
           \footnotetext{#2}
           \fi
     \fi
  }

% --------------------------------------------------------------------------- % 
  \newcommand{\imgwide}[3]{
   \bigskip
    \vfill

     \includegraphics[width=\textwidth]{#1}
      \label{#3}
       \if\relax\detokenize{#2}\relax
      % EMPTY
        \else
        % NON-EMPTY
          {\tiny#2}
       \fi
   \vfill
  }
% --------------------------------------------------------------------------- % 
  \newcommand{\imgwidefloat}[3]{
   \begin{figure}%
    \includegraphics[width=\textwidth]{#1}%
     \label{#3}
      \if\relax\detokenize{#2}\relax
      % EMPTY
        \else
        % NON-EMPTY
          {\tiny#2}
      \fi
   \end{figure}%
  }
% --------------------------------------------------------------------------- %
   % \newcounter{floats}
   % \newcounter{pagenow}
 % ------------------------------------------------------------------------ %
   \newcommand{\imgshift}[5]{
      % ------------------------------------ %
      % INSERT ANCHOR (OPTIONAL)
        \anchor{#5}{#3}{#4}
      % ------------------------------------ %
      % INSERT FULL SIZE IMAGE (+SHIFT) ASAP
       \begin{figure}[p]
      % ---------
        \stepcounter{floats}  % INCREASE COUNTER ..
        \label{FF:\thefloats} % .. TO CREATE A UNIQ LABEL
        \setcounterpageref{pagenow}{FF:\thefloats}
      % PLACE IMAGE ---------
      % https://tex.stackexchange.com/a/44176
        \vspace*{\dimexpr-1in-\topmargin-\headsep-\headheight}%
         \ifodd\value{pagenow}
          \hspace*{\dimexpr-1in-\oddsidemargin-\parindent}%
         \else
            \hspace*{\dimexpr-1in-\evensidemargin-\parindent}%
          \fi
         \makebox[\paperwidth][l]{
          \setlength{\unitlength}{.95\paperwidth}%
           \put(-#2,0){%
            \includegraphics[height=\paperheight]{#1}%
            }%
          }%
      % PLACE INFO  -------- 
         \ifodd\value{pagenow} %
          \pageinfo{-.0\textwidth}{-.35\textheight}{#4}{#5}
           \else %
            \pageinfo{-1.25\textwidth}{-.3\textheight}{#4}{#5}
          \fi
      % ---------
        \label{#3}
        \end{figure}
      % ------------------------------------ %
  }
% --------------------------------------------------------------------------- %
  \newcommand{\boxinfo}[2]{
      \if\relax\detokenize{#1}\relax
         \colorbox{white}{%
         {\footnotesize\parbox{.97\textwidth}{
           \smallskip
            \color{black} #2 %
             \smallskip}
       }} \fi
  }
  \newcommand{\imghuge}[4]{
      % ------------------------------------ %
      % INSERT ANCHOR (OPTIONAL)
        \anchor{#4}{#2}{#3}
      % ------------------------------------ %
      % PLACE IMAGE ASAP
       \begin{figure}[p]
      % ---------
        \stepcounter{floats}  % INCREASE COUNTER ..
        \label{FF:\thefloats} % .. TO CREATE A UNIQ LABEL
        \setcounterpageref{pagenow}{FF:\thefloats}
      % PLACE IMAGE ---------
        \includegraphics[width=\textwidth]{#1}%
      % PLACE INFO  -------- 
        \boxinfo{#3}{#4}
      % ---------
        \label{#2}
        \end{figure}
  }
% --------------------------------------------------------------------------- %

  % BESCHRIFTUNG FÜR PDFPAGESPLUS
  % -----------------------------
    \newcommand\pdfpagesplusinfo[2]{
   % RM FOOTNOTE NUMBER
    \deffootnote[1.5em]{1.5em}{1em}{\textsuperscript{}}
      % https://tex.stackexchange.com/questions/53068/
      % -> how-to-check-if-a-macro-value-is-empty
      \if\relax\detokenize{#2}\relax
      % #2 (=SWITCH) EMPTY
      % -> ANCHOR WAS NOT SET
      % -> INSERT TEXT HERE
      \footnotetext{\centering#1}
      \else
      % #2 (=SWITCH) NON-EMPTY
      % -> ANCHOR WAS SET
      % -> DO NOTHING HERE
      \fi
    }

   \newcommand\pdfpagesplus[7]{%
   \if\relax\detokenize{#6}\relax
   % #6 EMPTY -> DO NOTHING IN PLACE
   \else
   % #6 NON-EMPTY -> CREATE ANCHOR IN PLACE
     \marginicon{#7}
     \if\relax\detokenize{#4}\relax
     % #4 EMPTY -> INSERT ANCHOR ONLY
     \marginpar{\tiny p.~\pageref{#5}} % NON-EMPTY
     \else
     % #4 NON-EMPTY -> INSERT INFO + ANCHOR
     {\scriptsize
     #4, see p.~\pageref{#5}} % NON-EMPTY
     \fi
   \fi
   \afterpage{
   \renewcommand{\footnoterule}{\rule{0pt}{0pt}}
   \includepdf[pagecommand={\thispagestyle{fancy}}%
               \label{#5}\pdfpagesplusinfo{#4}{#6},%
               offset=10 10, delta=5 5,
               scale=.75,frame,pages=#2,nup=#3]{#1}
   }
  }


% --------------------------------------------------------------------------- %
% MDSH TGSO GUIDE (VERY SPECIFIC)
% --------------------------------------------------------------------------- %

  % FALLBACK
   \newcommand\grouping[1]{%
    \cleartoleft %
    {\thispagestyle{empty} %
      \LARGE #1} %
     \cleartoright %
   }

 % ------------------------------------------------------------------------- %
   \newlength{\abovedescriptor}
   \setlength{\abovedescriptor}{10pt plus 4pt minus 4pt}
  %\newcommand{\descriptorskip}{\vspace{\abovedescriptor}}
%  \newcommand{\descriptorskip}{ %
%  %\fbox{\parbox[c][\abovedescriptor][s]{\textwidth}{...}} %
%   \fbox{\parbox[c][\abovedescriptor][s]{\textwidth}{...}} %
%  }
   \newcommand{\descriptorskip}{\pagebreak[0]\vspace*{\abovedescriptor}}
   \newcommand{\descriptorlabel}[1]{%
              {\scalefont{.75} %
               \fontfamily{cgt}\selectfont %
               \underline{#1:}\hspace{-.5em}:}\hspace{.75em} %
   }
   \newcommand{\betweendq}{\vspace{-1\parskip}%
                           \vspace{-2pt}%
                           \vspace{-1\baselineskip}}


% --------------------------------------------------------------------------- % 
 % ------------------------------------------------------------------------- %
 %  \newcommand\descriptormethod[3]{%
 % 
 %      \vfill
 %       \pagebreak[2]
 %       \bigskip
 %        \begin{flushleft}
 %         \renewcommand\baselinestretch{1.2}
 %          \large\textbf{METHOD:#3}
 %          %\vspace{-1.2\medskipamount}
 %            \end{flushleft}%
 %  }
   \newcommand\descriptormethod[3]{%
  
     \clearpage
      \vfill
       \pagebreak[2]
        \bigskip
         \begin{flushleft}
          \begin{spacing}{1.0}
           \scalefont{3}#3
            \end{spacing}%
             \end{flushleft}%
   }
 % ------------------------------------------------------------------------- %
   \newcommand\descriptorhow[3]{%
       \descriptorskip
       \ifnum\numexpr#1 < 2 % DMODE = 1 = NO INLINE CONTENT
         \ifnum\numexpr#2 < 150
          \grafikinline{\iconhowmarginsmall}{}%
         \else
           \ifnum\numexpr#2 < 250
            \grafikinline{\iconhowmarginmedium}{}%
           \else
            \grafikinline{\iconhowmarginlarge}{}%
           \fi
         \fi
       \else % DMODE = 2 = INLINE CONTENT 
         \ifnum\numexpr#1 < 3 % DMODE = 2 = INLINE CONTENT
           \ifnum\numexpr#2 < 50 % NOT MUCH
           \begin{flushleft}
           \grafikinline{\iconhowinline}{}%
           \descriptorlabel{HOW} %
                        {\color{green}#3} %
                         \end{flushleft} %
           \else % MORE
           \grafikinline{\iconhowinline}{}%
           \descriptorlabel{HOW} %
                        {\color{red}#3} %
           \fi
          \else
          \begin{flushleft}
          \grafikinline{\iconhowinline}{}%
          \descriptorlabel{HOW} %
                       {\footnotesize
                        \color{blue}#3} %
                        \end{flushleft} %
          \fi
       \fi
   }
 % ------------------------------------------------------------------------- %
   \newcommand\descriptorexample[3]{%
     %\descriptorskip
      \pagebreak[2]
       \ifnum\numexpr#1 < 2 % DMODE = 1 = NO INLINE CONTENT
         \ifnum\numexpr#2 < 150
          \grafikinline{\iconexamplemargin}{}%
         \else
           \ifnum\numexpr#2 < 250
            \grafikinline{\iconexamplemargin}{}%
           \else
            \grafikinline{\iconexamplemargin}{}%
           \fi
         \fi
       \else % DMODE = 2 = INLINE CONTENT 
         \ifnum\numexpr#1 < 3 % DMODE = 2 = INLINE CONTENT
           \ifnum\numexpr#2 < 50 % NOT MUCH
           \begin{flushleft}
           \grafikinline{\iconexampleinline}{}%
           \descriptorlabel{EXAMPLE} %
                        {\underline{#3}} %
                         \end{flushleft} %
           \vspace{-.2\medskipamount}
           \else % MORE
           \begin{flushleft}
           \grafikinline{\iconexampleinline}{}%
           \descriptorlabel{EXAMPLE} %
                        {\color{red}#3} %
                         \end{flushleft} %
           \vspace{-.2\medskipamount}
           \fi
          \else
          \begin{flushleft}
          \grafikinline{\iconexampleinline}{}%
          \descriptorlabel{EXAMPLE} %
                       {#3}\end{flushleft} %
          \fi
       \fi
   }
% ------------------------------------------------------------------------- %
  \newcommand\descriptorwhat[3]{%
    \descriptorskip
    \ifnum\numexpr#1 < 2 % DMODE = 1 = NO INLINE CONTENT
      \ifnum\numexpr#2 < 150
       \grafikinline{\iconwhatmargin}{}%
      \else
        \ifnum\numexpr#2 < 250
         \grafikinline{\iconwhatmargin}{}%
        \else
         \grafikinline{\iconwhatmargin}{}%
        \fi
      \fi
    \else % DMODE = 2 = INLINE CONTENT 
      \ifnum\numexpr#2 < 50 % NOT MUCH
      \begin{flushleft}
      \grafikinline{\iconwhatinline}{}%
      \descriptorlabel{WHAT} %
                   {\color{green}#3} %
                    \end{flushleft} %
      \else % MORE
      \begin{flushleft}
      \grafikinline{\iconwhatinline}{}%
      \descriptorlabel{WHAT} %
                   {#3}\end{flushleft} %
      \fi
    \fi
  }
% ------------------------------------------------------------------------- %
  \newcommand\descriptorwho[3]{%
    \descriptorskip
    \ifnum\numexpr#1 < 2 % DMODE = 1 = NO INLINE CONTENT
       \grafikinline{\icontmpmargin}{}%
    \else % DMODE = 2 = INLINE CONTENT 
      \begin{flushleft}
      \grafikinline{\icontmpinline}{}%
      \descriptorlabel{WHO} %
                   {\color{green}#3} %
                    \end{flushleft} %
    \fi
  }
% ------------------------------------------------------------------------- %
  \newcommand\descriptorwhy[3]{%
    \descriptorskip
    \ifnum\numexpr#1 < 2 % DMODE = 1 = NO INLINE CONTENT
       \grafikinline{\icontmpmargin}{}%
    \else % DMODE = 2 = INLINE CONTENT 
      \begin{flushleft}
      \grafikinline{\icontmpinline}{}%
      \descriptorlabel{WHY} %
                   {\color{green}#3} %
                    \end{flushleft} %
    \fi
  }
% ------------------------------------------------------------------------- %
  \newcommand\descriptorwhen[3]{%
    \descriptorskip
    \ifnum\numexpr#1 < 2 % DMODE = 1 = NO INLINE CONTENT
       \grafikinline{\icontmpmargin}{}%           
    \else % DMODE = 2 = INLINE CONTENT 
      \begin{flushleft}
      \grafikinline{\icontmpinline}{}%
      \descriptorlabel{WHEN} %
                   {\color{green}#3} %
                    \end{flushleft} %
    \fi
  }
% ------------------------------------------------------------------------- %
  \newcommand\descriptorabout[3]{%
    \descriptorskip
    \ifnum\numexpr#1 < 2 % DMODE = 1 = NO INLINE CONTENT
       \grafikinline{\icontmpmargin}{}%           
    \else % DMODE = 2 = INLINE CONTENT 
      \begin{flushleft}
      \grafikinline{\icontmpinline}{}%
      \descriptorlabel{ABOUT} %
                   {\color{green}#3} %
                    \end{flushleft} %
    \fi
  }
% ------------------------------------------------------------------------- %
  \newcommand\descriptorremember[3]{%
%   \descriptorskip
%   \ifnum\numexpr#1 < 2 % DMODE = 1 = NO INLINE CONTENT
%      \grafikinline{\icontmpmargin}{}%
%      \vspace{-1.2\baselineskip}       
%   \else % DMODE = 2 = INLINE CONTENT 
%     \begin{flushleft}
%     \grafikinline{\icontmpinline}{\hspace{-1.5em}}%
%                  {\color{green}#3} %
%                   \end{flushleft} %
%   \fi
   \ifnum\numexpr#1 < 2 % DMODE = 1 = NO INLINE CONTENT
    \vfill
     \makebox[\textwidth][s]{\scalefont{2}%
     \fontfamily{vpi}\selectfont R E M E M B E R}%
     \vspace{2\bigskipamount}
    %\vfill
   \else
     \vfill
     \vspace{2\bigskipamount}
     \makebox[\textwidth][s]{\scalefont{1.9}%
     \fontfamily{cgt}\selectfont R E M E M B E R}%
              \raisebox{.5\baselineskip}{\hspace{1em}\footnotemark}
     \footnotetext{#3}
     \vspace{3\bigskipamount}
     \vfill
   \fi
  }
% ------------------------------------------------------------------------- %
  \newcommand\descriptorurgency[3]{%
    \descriptorskip
    \ifnum\numexpr#1 < 2 % DMODE = 1 = NO INLINE CONTENT
       \grafikinline{\icontmpmargin}{}%
    \else % DMODE = 2 = INLINE CONTENT 
      \begin{flushleft}
      \grafikinline{\icontmpinline}{}%
      \descriptorlabel{URGENCY} %
                   {\color{green}#3} %
                    \end{flushleft} %
    \fi
  }
% ------------------------------------------------------------------------- %
  \newcommand\descriptornote[3]{%
   \descriptorskip
   \descriptorlabel{NOTE} #3 %
  }
% ------------------------------------------------------------------------- %
  \newcommand\descriptorwarning[3]{%
   \ifnum\numexpr#1 < 2 % DMODE = 1 = NO INLINE CONTENT
   \grafikinline{\iconwarningmargin}{}%
   \else
      \vfill
       \descriptorskip
        \medskip
         \begin{framed}
           \descriptorlabel{WARNING} #3 %
            \smallskip
           \end{framed}
        \medskip\vfill
   \fi
  }
% ------------------------------------------------------------------------- %
  \newcommand\descriptorrelates[2]{%
   \descriptorlabel{SEE ALSO}\hspace{-.75em}%
   #2 (\pointright \underline{P.\pageref{#1}} )\\
  }
% ------------------------------------------------------------------------- %

